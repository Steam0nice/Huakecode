document.addEventListener("DOMContentLoaded", () => {
  if (0 !== $(".Xc_index_banner .swiper-container").length) {
    let e = "horizontal";
    Xc.IS_MOBILE ||
      2 !== $(".Xc_index_banner-recommend .item").length ||
      (e = "vertical"),
      new Swiper(".swiper-container", {
        keyboard: !1,
        direction: e,
        loop: !0,
        autoplay: !0,
        mousewheel: !0,
        pagination: { el: ".swiper-pagination" },
        navigation: {
          nextEl: ".swiper-button-next",
          prevEl: ".swiper-button-prev"
        }
      });
  }
  {
    const e = (e) =>
         `\n<li class="Xc_list_item wow index2">\n<div class="line"></div>\n<a href="${
            e.permalink
          }" class="thumbnail" title="${
            e.title
          }" rel="noopener noreferrer">\n<img width="100%" height="100%" class="lazyload" src="${
            e.lazyload
          }" data-src="${e.image[0]}" alt="${
            e.title
          }" />\n</a>\n<div class="information">\n<a href="${
            e.permalink
          }" class="title" title="${
            e.title
          }" rel="noopener noreferrer">\n<span class="badge" style="display: ${
            "sticky" === e.type ? "inline-block" : "none"
          }">置顶</span>${e.title}\n</a>\n<a class="abstract" href="${
            e.permalink
          }" title="文章摘要" rel="noopener noreferrer">${
            e.abstract
          }</a>\n<div class="meta">\n<ul class="items">\n<li>${
            e.created
          }</li>\n<li><i class="iconfont icon-yuedu"></i> ${
            e.views
          }</i></li>\n<li><i class="iconfont icon-pinglun"></i> ${
            e.commentsNum
          }</li>\n<li><i class="iconfont icon-zan"></i> ${
            e.agree
          }</li>\n</ul>\n<div class="last" style="display: ${
            e.category.length ? "flex" : "none"
          }">\n<i class="iconfont icon-A21" style="margin-right:3px;font-size:15px"></i>\n<a class="link" rel="noopener noreferrer" href="${
            e.category.length && e.category[0].permalink
          }">${
            e.category.length && e.category[0].name
          }</a>\n</div>\n</div>\n</div>\n</li>\n`;
    let l = {
      page: window.Xc.PAGE_INDEX,
      pageSize: window.Xc.PAGE_SIZE,
      type: "created"
    };
    const t = () => {
        $(".Xc_index_list .Xc_list").html(""), $(".Xc_load").show();
        let e = $('.Xc_index_title-title .item[data-type="' + l.type + '"]'),
          t = $(".Xc_index_title-title .line");
        e.addClass("active").siblings().removeClass("active"),
          t.css({ left: e.position().left, width: e.width() });
      },
      a = () =>
        new Promise((t, a) => {
          $(".Xc_load").attr("loading", !0),
            $(".Xc_load").html("loading..."),
            $(".Xc_index_list .Xc_list_loading").show(),
            $.ajax({
              url: Xc.BASE_API,
              type: "POST",
              dataType: "json",
              data: {
                routeType: "publish_list",
                page: l.page,
                pageSize: l.pageSize,
                type: l.type
              },
              success(l) {
                if (0 === l.data.length)
                  return (
                    $(".Xc_load").removeAttr("loading"),
                    $(".Xc_load").html("查看更多"),
                    $(".Xc_load").hide(),
                    $(".Xc_index_list .Xc_list_loading").hide(),
                    Qmsg.warning("没有更多内容了")
                  );
                l.data.forEach((l) =>
                  $(".Xc_index_list .Xc_list").append(e(l))
                ),
                  $(".Xc_load").removeAttr("loading"),
                  $(".Xc_load").html("查看更多"),
                  $(".Xc_index_list .Xc_list_loading").hide(),
                  t(l.data.length > 0 ? l.data.length - 1 : 0);
              }
            });
        });
    t(),
      a(),
      $(".Xc_index_title-title .item").on("click", async function () {
        $(this).attr("data-type") !== l.type &&
          ((l = {
            page: window.Xc.PAGE_INDEX,
            pageSize: window.Xc.PAGE_SIZE,
            type: $(this).attr("data-type")
          }),
          t(),
          a());
      }),
      $(".Xc_load").on("click", async function () {
        if ($(this).attr("loading")) return;
        l.page++;
        let e = await a();
        e = $(".Xc_index_list .Xc_list .Xc_list_item").length - e;
        const t = `.Xc_index_list .Xc_list .Xc_list_item:nth-child(${e})`,
          n = $(t).offset().top - $(".Xc_header").height();
        window.scrollTo({ top: n - 15, behavior: "smooth" });
      });
  }
  {
    const e = $(".Xc_index_list").attr("data-wow");
    "off" !== e &&
      e &&
      new WOW({
        boxClass: "wow",
        animateClass: `animated ${e}`,
        offset: 0,
        mobile: !0,
        live: !0,
        scrollContainer: null
      }).init();
  }
});
